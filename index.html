<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EMI Risk Dashboard</title>

    <!-- React + Babel + Tailwind -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="bg-gray-100 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
      const { useState } = React;

      function App() {
        const [user, setUser] = useState(null);
        const [isSignup, setIsSignup] = useState(false);
        const [form, setForm] = useState({ username: "", email: "", password: "", confirm: "" });
        const [tab, setTab] = useState("home");
        const [monthlyIncome, setMonthlyIncome] = useState("");
        const [emiAmount, setEmiAmount] = useState("");
        const [salaryDate, setSalaryDate] = useState("");
        const [emiDate, setEmiDate] = useState("");
        const [risk, setRisk] = useState(null);

        function handleSignup() {
          if (!form.username || !form.email || !form.password || !form.confirm)
            return alert("Please fill all fields");
          if (form.password !== form.confirm) return alert("Passwords do not match!");
          setUser({ name: form.username, email: form.email });
        }

        function handleLogin() {
          if (!form.username || !form.password) return alert("Enter both fields");
          setUser({ name: form.username, email: form.username + "@example.com" });
        }

        function logout() {
          setUser(null);
          setForm({ username: "", email: "", password: "", confirm: "" });
        }

        function predictRisk() {
          if (!monthlyIncome || !emiAmount) return alert("Please enter all fields");
          const ratio = parseFloat(emiAmount) / parseFloat(monthlyIncome);
          if (ratio > 0.5) setRisk("High Risk ğŸ˜¨");
          else if (ratio > 0.3) setRisk("Medium Risk ğŸ˜");
          else setRisk("Low Risk ğŸ˜„");
        }

        // LOGIN / SIGNUP SCREENS
        if (!user) {
          return (
            <div className="flex items-center justify-center min-h-screen bg-gradient-to-r from-purple-600 to-pink-500">
              <div className="bg-white p-8 rounded-2xl shadow-xl w-96">
                <h2 className="text-2xl font-bold text-center text-gray-800 mb-6">
                  {isSignup ? "Create Account" : "Welcome Back"}
                </h2>

                <div className="space-y-4">
                  <input
                    type="text"
                    placeholder="Username"
                    value={form.username}
                    onChange={(e) => setForm({ ...form, username: e.target.value })}
                    className="w-full p-3 border rounded-xl focus:ring-2 focus:ring-purple-400 outline-none"
                  />

                  {isSignup && (
                    <input
                      type="email"
                      placeholder="Email"
                      value={form.email}
                      onChange={(e) => setForm({ ...form, email: e.target.value })}
                      className="w-full p-3 border rounded-xl focus:ring-2 focus:ring-purple-400 outline-none"
                    />
                  )}

                  <input
                    type="password"
                    placeholder="Password"
                    value={form.password}
                    onChange={(e) => setForm({ ...form, password: e.target.value })}
                    className="w-full p-3 border rounded-xl focus:ring-2 focus:ring-purple-400 outline-none"
                  />

                  {isSignup && (
                    <input
                      type="password"
                      placeholder="Confirm Password"
                      value={form.confirm}
                      onChange={(e) => setForm({ ...form, confirm: e.target.value })}
                      className="w-full p-3 border rounded-xl focus:ring-2 focus:ring-purple-400 outline-none"
                    />
                  )}

                  <button
                    onClick={isSignup ? handleSignup : handleLogin}
                    className="w-full bg-gradient-to-r from-purple-600 to-pink-500 text-white py-3 rounded-xl font-semibold hover:scale-105 transition"
                  >
                    {isSignup ? "Sign Up" : "Login"}
                  </button>

                  <p className="text-center text-gray-600">
                    {isSignup ? "Already have an account?" : "New user?"}{" "}
                    <button
                      className="text-purple-600 font-semibold"
                      onClick={() => setIsSignup(!isSignup)}
                    >
                      {isSignup ? "Login" : "Sign up"}
                    </button>
                  </p>
                </div>
              </div>
            </div>
          );
        }

        // MAIN DASHBOARD
        return (
          <div className="flex flex-col min-h-screen">
            {/* Header */}
            <header className="bg-gradient-to-r from-purple-600 to-pink-500 text-white py-6 px-8 shadow-lg flex justify-between items-center">
              <div>
                <h1 className="text-2xl font-bold">Welcome, {user.name} ğŸ‘‹</h1>
                <p className="text-sm opacity-90">Smart financial management</p>
              </div>
              <button
                onClick={logout}
                className="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-xl text-white text-sm"
              >
                Logout
              </button>
            </header>

            {/* Tabs */}
            <div className="flex justify-center gap-8 bg-white shadow-md rounded-2xl mx-auto mt-6 w-11/12 max-w-3xl">
              {["home", "reminders", "topup", "profile"].map((item) => (
                <button
                  key={item}
                  onClick={() => setTab(item)}
                  className={`py-3 flex-1 rounded-2xl font-medium ${
                    tab === item
                      ? "bg-gradient-to-r from-purple-600 to-pink-500 text-white"
                      : "text-gray-600 hover:text-purple-600"
                  }`}
                >
                  {item === "home" && "ğŸ  Home"}
                  {item === "reminders" && "ğŸ”” Reminders"}
                  {item === "topup" && "ğŸ“ˆ Top-Up"}
                  {item === "profile" && "ğŸ‘¤ Profile"}
                </button>
              ))}
            </div>

            {/* Main Content */}
            <main className="flex-grow flex justify-center items-start py-8">
              <div className="bg-white rounded-2xl shadow-lg p-8 w-11/12 max-w-3xl">
                {tab === "home" && (
                  <>
                    <h2 className="text-2xl font-bold mb-4 text-gray-800">EMI Risk Predictor</h2>
                    <p className="text-gray-500 mb-6">Predict EMI risks and plan wisely.</p>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                      <div>
                        <label className="block text-gray-700 mb-2">ğŸ’° Monthly Income (â‚¹)</label>
                        <input
                          type="number"
                          value={monthlyIncome}
                          onChange={(e) => setMonthlyIncome(e.target.value)}
                          placeholder="Enter your monthly income"
                          className="w-full p-3 border rounded-xl focus:ring-2 focus:ring-purple-400 outline-none"
                        />
                      </div>

                      <div>
                        <label className="block text-gray-700 mb-2">ğŸ¦ EMI Amount (â‚¹)</label>
                        <input
                          type="number"
                          value={emiAmount}
                          onChange={(e) => setEmiAmount(e.target.value)}
                          placeholder="Enter EMI amount"
                          className="w-full p-3 border rounded-xl focus:ring-2 focus:ring-purple-400 outline-none"
                        />
                      </div>

                      <div>
                        <label className="block text-gray-700 mb-2">ğŸ“… Salary Date</label>
                        <input
                          type="date"
                          value={salaryDate}
                          onChange={(e) => setSalaryDate(e.target.value)}
                          className="w-full p-3 border rounded-xl focus:ring-2 focus:ring-purple-400 outline-none"
                        />
                      </div>

                      <div>
                        <label className="block text-gray-700 mb-2">ğŸ“† EMI Due Date</label>
                        <input
                          type="date"
                          value={emiDate}
                          onChange={(e) => setEmiDate(e.target.value)}
                          className="w-full p-3 border rounded-xl focus:ring-2 focus:ring-purple-400 outline-none"
                        />
                      </div>
                    </div>

                    <div className="text-center mt-8">
                      <button
                        onClick={predictRisk}
                        className="bg-gradient-to-r from-purple-600 to-pink-500 text-white px-6 py-3 rounded-xl font-semibold hover:scale-105 transition"
                      >
                        ğŸš€ Predict Risk
                      </button>

                      {risk && (
                        <div className="mt-6 text-xl font-semibold text-gray-700">
                          Result: <span className="text-purple-600">{risk}</span>
                        </div>
                      )}
                    </div>
                  </>
                )}

                {tab === "profile" && (
                  <div>
                    <h2 className="text-2xl font-bold mb-4 text-gray-800">Profile Overview ğŸ‘¤</h2>

                    <div className="space-y-4 text-gray-700">
                      <div>
                        <h3 className="font-semibold text-lg">User Details</h3>
                        <p>Name: {user.name}</p>
                        <p>Email: {user.email}</p>
                        <p>Phone: +91 98765 43210</p>
                      </div>

                      <div>
                        <h3 className="font-semibold text-lg mt-4">Bank Details</h3>
                        <p>Bank Name: HDFC Bank</p>
                        <p>Account Number: **** **** 1234</p>
                      </div>

                      <div>
                        <h3 className="font-semibold text-lg mt-4">EMI Overview</h3>
                        <p>Total EMIs: 12</p>
                        <p>Paid: 7</p>
                        <p>Remaining: 5</p>
                        <p>EMI Amount: â‚¹{emiAmount || "0"}</p>
                      </div>

                      <div>
                        <h3 className="font-semibold text-lg mt-4">Risk Status</h3>
                        <p>Current Risk Level: {risk || "Not evaluated yet"}</p>
                        <p>Next Due Date: {emiDate || "Not set"}</p>
                      </div>
                    </div>
                  </div>
                )}

                {tab === "reminders" && (
                  <div className="text-center text-gray-700">
                    <h2 className="text-2xl font-bold mb-3">Reminders â°</h2>
                    <p>Your upcoming EMI due dates will appear here.</p>
                  </div>
                )}

                {tab === "topup" && (
                  <div className="text-center text-gray-700">
                    <h2 className="text-2xl font-bold mb-3">Top-Up ğŸ“ˆ</h2>
                    <p>Track your top-ups and manage repayments efficiently.</p>
                  </div>
                )}
              </div>
            </main>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
